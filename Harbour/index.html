<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="./index.js"></script>
	<script>
		var TITLE, INDEX;

		function init(){
			// Handle Title
			document.title = TITLE;

			// Render PageLink Object
			var arr = INDEX.map( (link, idx) => {
				return `<div class="LinkObj" onClick="link(this, ${idx})">${link.title}</div>`;
			});
			var navPanel = document.getElementById("MainNav");
			navPanel.innerHTML = arr.join('');

			// Set Default Page
			const urlParams = new URLSearchParams(window.location.search);
			var pageIdx = parseInt(urlParams.get('p'));
			if(pageIdx==null || isNaN(pageIdx)) pageIdx = 0;

			var defaultElem = document.getElementsByClassName('LinkObj')[pageIdx];
			link(defaultElem, pageIdx);
		}
		function link(elem, pageIdx){
			// Render PageLink Objects Active
			var arr = document.getElementsByClassName('LinkObj');
			for(var i=0; i<arr.length; i++){
				if(arr[i].classList.contains('active')){
					arr[i].classList.remove('active');
				}
			}
			elem.classList.add("active");

			// Render Page
			var embdPanel = document.getElementById("MainContext");
			embdPanel.src = INDEX[pageIdx].url;

			// Modify URL
			const path = window.location.pathname
			window.history.pushState({ additionalInformation: 'Updated the URL with JS' }, TITLE, path+`?p=${pageIdx}`);
		}
		window.onload = init;
	</script>
	<style>
		body {
			background: #454752;
			color: white;
			margin: 0;
		}

		#MainFrame {
			display: flex;
			flex-direction: column;
			height: calc(100vh);
		}
		#MainNav {
			display: flex;
			justify-content: center;
			flex-wrap: wrap;
			background: #25222e;
			padding-top: 0.5rem;
			max-height: 110px;
			overflow: auto;
		}
		#MainNav .LinkObj {
			cursor: pointer;
			padding: .7rem;
			margin: 0 5px 10px 5px;

			border: 3px groove #bfbfbf;
			background: #101014;
			color: white;
			font-size: 12px;
		}
		#MainNav .LinkObj:hover { background: #474656; }
		#MainNav .LinkObj:active { background: black; }
		#MainNav .LinkObj.active { background: #6a6185; }
		#MainContext {
			flex-grow: 1;
			border: 0;
		}
	</style>
</head>
<div id="MainFrame">
	<div id="MainNav"></div>
	<iframe id="MainContext" type="text/html" src="" >
		你的瀏覽器不支援 iframe
	</iframe>
</div>
</html>